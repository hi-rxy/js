{"remainingRequest":"D:\\wwwroot\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js!D:\\wwwroot\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\wwwroot\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\wwwroot\\vue-admin-template\\src\\views\\tables\\table.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\wwwroot\\vue-admin-template\\src\\views\\tables\\table.vue","mtime":1646556201873},{"path":"D:\\wwwroot\\vue-admin-template\\babel.config.js","mtime":1645316547015},{"path":"D:\\wwwroot\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645316876002},{"path":"D:\\wwwroot\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js","mtime":1645316878558},{"path":"D:\\wwwroot\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645316876002},{"path":"D:\\wwwroot\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js","mtime":1645316879025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29ydC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IGZldGNoTGlzdCwgb3B0aW1pemVUYWJsZSwgcmVwYWlyVGFibGUgfSBmcm9tICdAL2FwaS90YWJsZSc7CmltcG9ydCB3YXZlcyBmcm9tICdAL2RpcmVjdGl2ZS93YXZlcyc7IC8vIHdhdmVzIGRpcmVjdGl2ZQoKaW1wb3J0IFBhZ2luYXRpb24gZnJvbSAnQC9jb21wb25lbnRzL1BhZ2luYXRpb24nOwppbXBvcnQgeyBkZWxldGVBZG1pbiB9IGZyb20gJ0AvYXBpL2FkbWluJzsgLy8gc2Vjb25kYXJ5IHBhY2thZ2UgYmFzZWQgb24gZWwtcGFnaW5hdGlvbgoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdUYWJsZScsCiAgY29tcG9uZW50czogewogICAgUGFnaW5hdGlvbjogUGFnaW5hdGlvbgogIH0sCiAgZGlyZWN0aXZlczogewogICAgd2F2ZXM6IHdhdmVzCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdG90YWw6IDAsCiAgICAgIC8vIOafpeivogogICAgICBsaXN0UXVlcnk6IHsKICAgICAgICBwYWdlOiAxLAogICAgICAgIGxpbWl0OiAxMCwKICAgICAgICBzb3J0OiAnLUNyZWF0ZV90aW1lJwogICAgICB9LAogICAgICAvLyDliIbpobXmlbDmja4KICAgICAgbGlzdDogbnVsbCwKICAgICAgLy8g5YiG6aG15pWw5o2u5Yqg6L2954q25oCBCiAgICAgIGxpc3RMb2FkaW5nOiB0cnVlCiAgICB9OwogIH0sCiAgd2F0Y2g6IHt9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldExpc3QoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldExpc3Q6IGZ1bmN0aW9uIGdldExpc3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvLyDmnYPpmZDliJfooagKICAgICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWU7CiAgICAgIGZldGNoTGlzdCh0aGlzLmxpc3RRdWVyeSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpcy5saXN0ID0gcmVzcG9uc2UuZGF0YS5pdGVtczsKICAgICAgICBfdGhpcy50b3RhbCA9IHJlc3BvbnNlLmRhdGEudG90YWw7CiAgICAgICAgX3RoaXMubGlzdExvYWRpbmcgPSBmYWxzZTsKICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgX3RoaXMubGlzdExvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgcmVzZXRGaWx0ZXI6IGZ1bmN0aW9uIHJlc2V0RmlsdGVyKCkgewogICAgICAvLyDph43nva7mn6Xor6IKICAgICAgdGhpcy5saXN0UXVlcnkgPSB7CiAgICAgICAgcGFnZTogMSwKICAgICAgICBsaW1pdDogMTAsCiAgICAgICAgc29ydDogJy1DcmVhdGVfdGltZScKICAgICAgfTsKICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICB9LAogICAgaGFuZGxlRmlsdGVyOiBmdW5jdGlvbiBoYW5kbGVGaWx0ZXIoKSB7CiAgICAgIC8vIOeCueWHu+afpeivogogICAgICB0aGlzLmxpc3RRdWVyeS5wYWdlID0gMTsKICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICB9LAogICAgc29ydENoYW5nZTogZnVuY3Rpb24gc29ydENoYW5nZShkYXRhKSB7CiAgICAgIC8vIOiuvue9ruaOkuW6jwogICAgICB2YXIgcHJvcCA9IGRhdGEucHJvcCwKICAgICAgICAgIG9yZGVyID0gZGF0YS5vcmRlcjsKICAgICAgdGhpcy5zb3J0QnlDb2x1bW4ob3JkZXIsIHByb3ApOwogICAgfSwKICAgIHNvcnRCeUNvbHVtbjogZnVuY3Rpb24gc29ydEJ5Q29sdW1uKG9yZGVyLCBwcm9wKSB7CiAgICAgIGlmIChvcmRlciA9PT0gJ2FzY2VuZGluZycpIHsKICAgICAgICB0aGlzLmxpc3RRdWVyeS5zb3J0ID0gJysnICsgcHJvcDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmxpc3RRdWVyeS5zb3J0ID0gJy0nICsgcHJvcDsKICAgICAgfQoKICAgICAgdGhpcy5oYW5kbGVGaWx0ZXIoKTsKICAgIH0sCiAgICBnZXRTb3J0Q2xhc3M6IGZ1bmN0aW9uIGdldFNvcnRDbGFzcyhrZXkpIHsKICAgICAgLy8g5o6S5bqPCiAgICAgIHZhciBzb3J0ID0gdGhpcy5saXN0UXVlcnkuc29ydDsKICAgICAgcmV0dXJuIHNvcnQgPT09ICIrIi5jb25jYXQoa2V5KSA/ICdhc2NlbmRpbmcnIDogJ2Rlc2NlbmRpbmcnOwogICAgfSwKICAgIGhhbmRsZU9wdGltaXplOiBmdW5jdGlvbiBoYW5kbGVPcHRpbWl6ZShyb3cpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICAvLyDkvJjljJYKICAgICAgdGhpcy4kY29uZmlybSgn5q2k5pON5L2c5bCG5LyY5YyWJyArIHJvdy5OYW1lICsgJ+ihqCwg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBvcHRpbWl6ZVRhYmxlKHsKICAgICAgICAgIG5hbWU6IHJvdy5OYW1lCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBfdGhpczIuJG5vdGlmeSh7CiAgICAgICAgICAgIHRpdGxlOiAnU3VjY2VzcycsCiAgICAgICAgICAgIG1lc3NhZ2U6ICdEZWxldGUgU3VjY2Vzc2Z1bGx5JywKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBkdXJhdGlvbjogMjAwMAogICAgICAgICAgfSk7CgogICAgICAgICAgX3RoaXMyLmdldExpc3QoKTsKICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCfkvJjljJblpLHotKUnKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlUmVwYWlyOiBmdW5jdGlvbiBoYW5kbGVSZXBhaXIocm93KSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgLy8g5L+u5aSNCiAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuS/ruWkjScgKyByb3cuTmFtZSArICfooagsIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgcmVwYWlyVGFibGUoewogICAgICAgICAgbmFtZTogcm93Lk5hbWUKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIF90aGlzMy4kbm90aWZ5KHsKICAgICAgICAgICAgdGl0bGU6ICdTdWNjZXNzJywKICAgICAgICAgICAgbWVzc2FnZTogJ0RlbGV0ZSBTdWNjZXNzZnVsbHknLAogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAwCiAgICAgICAgICB9KTsKCiAgICAgICAgICBfdGhpczMuZ2V0TGlzdCgpOwogICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgY29uc29sZS5sb2coJ+S/ruWkjeWksei0pScpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyHA;AACA,sC,CAAA;;AACA;AACA,0C,CAAA;;AAEA;AACAA,eADA;AAEAC;AAAAC;AAAA,GAFA;AAGAC;AAAAC;AAAA,GAHA;AAIAC,MAJA,kBAIA;AACA;AACAC,cADA;AAEA;AACAC;AACAC,eADA;AAEAC,iBAFA;AAGAC;AAHA,OAHA;AAQA;AACAC,gBATA;AAUA;AACAC;AAXA;AAaA,GAlBA;AAmBAC,WAnBA;AAoBAC,SApBA,qBAoBA;AACA;AACA,GAtBA;AAuBAC;AACAC,WADA,qBACA;AAAA;;AACA;AACA;AACAC;AACA;AACA;AACA;AACA,OAJA,EAIA;AACA;AACA,OANA;AAOA,KAXA;AAYAC,eAZA,yBAYA;AACA;AACA;AACAV,eADA;AAEAC,iBAFA;AAGAC;AAHA;AAKA;AACA,KApBA;AAqBAS,gBArBA,0BAqBA;AACA;AACA;AACA;AACA,KAzBA;AA0BAC,cA1BA,sBA0BAf,IA1BA,EA0BA;AACA;AACA;AAAA;AACA;AACA,KA9BA;AA+BAgB,gBA/BA,wBA+BAC,KA/BA,EA+BAC,IA/BA,EA+BA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;;AACA;AACA,KAtCA;AAuCAC;AACA;AACA;AACA;AACA,KA3CA;AA4CAC,kBA5CA,0BA4CAC,GA5CA,EA4CA;AAAA;;AACA;AACA;AACAC,+BADA;AAEAC,8BAFA;AAGAC;AAHA,SAIAC,IAJA,CAIA;AACAC;AAAA/B;AAAA;AACA;AACAgC,4BADA;AAEAC,0CAFA;AAGAJ,2BAHA;AAIAK;AAJA;;AAMA;AACA,SARA,EAQA;AACAC;AACA,SAVA;AAWA,OAhBA;AAiBA,KA/DA;AAgEAC,gBAhEA,wBAgEAV,GAhEA,EAgEA;AAAA;;AACA;AACA;AACAC,+BADA;AAEAC,8BAFA;AAGAC;AAHA,SAIAC,IAJA,CAIA;AACAO;AAAArC;AAAA;AACA;AACAgC,4BADA;AAEAC,0CAFA;AAGAJ,2BAHA;AAIAK;AAJA;;AAMA;AACA,SARA,EAQA;AACAC;AACA,SAVA;AAWA,OAhBA;AAiBA;AAnFA;AAvBA","names":["name","components","Pagination","directives","waves","data","total","listQuery","page","limit","sort","list","listLoading","watch","created","methods","getList","fetchList","resetFilter","handleFilter","sortChange","sortByColumn","order","prop","getSortClass","handleOptimize","row","confirmButtonText","cancelButtonText","type","then","optimizeTable","title","message","duration","console","handleRepair","repairTable"],"sourceRoot":"src/views/system","sources":["table.vue"],"sourcesContent":["<template>\n    <div class=\"app-container\">\n        <el-row :gutter=\"20\">\n            <el-col :span=\"24\">\n                <el-card class=\"box-card\">\n                    <!--  搜索开始  -->\n                    <div class=\"filter-container\" style=\"margin-bottom: 15px;\">\n                        <el-input v-model=\"listQuery.Name\" placeholder=\"表名称\" style=\"width: 200px;\"\n                                  class=\"filter-item\" @keyup.enter.native=\"handleFilter\"\n                        />\n                        <el-button v-waves class=\"filter-item\" style=\"margin-left: 10px;\" type=\"primary\"\n                                   icon=\"el-icon-search\" @click=\"handleFilter\"\n                        >\n                            搜索\n                        </el-button>\n                        <el-button v-waves class=\"filter-item\" style=\"margin-left: 10px;\" type=\"primary\"\n                                   icon=\"el-icon-refresh\" @click=\"resetFilter\"\n                        >\n                            清除\n                        </el-button>\n                    </div>\n                    <!--  搜索结束  -->\n\n                    <!--  表格开始  -->\n                    <el-table\n                        :key=\"0\"\n                        v-loading=\"listLoading\"\n                        element-loading-text=\"拼命加载中\"\n                        element-loading-spinner=\"el-icon-loading\"\n                        element-loading-background=\"rgba(245, 247, 250, 1)\"\n                        :data=\"list\"\n                        border\n                        fit\n                        highlight-current-row\n                        style=\"width: 100%;\"\n                        max-height=\"750\"\n                        @sort-change=\"sortChange\"\n                    >\n                        <!--  字段开始    -->\n                        <el-table-column\n                            type=\"selection\"\n                            width=\"55\">\n                        </el-table-column>\n                        <el-table-column show-overflow-tooltip label=\"表名\" prop=\"Name\"  align=\"center\">\n                            <template slot-scope=\"{row}\">\n                                <span>{{ row.Name }}</span>\n                            </template>\n                        </el-table-column>\n                        <el-table-column label=\"存储引擎\" align=\"center\">\n                            <template slot-scope=\"{row}\">\n                                <span>{{ row.Engine }}</span>\n                            </template>\n                        </el-table-column>\n                        <el-table-column label=\"行格式\" align=\"center\">\n                            <template slot-scope=\"{row}\">\n                                <span>{{ row.Row_format }}</span>\n                            </template>\n                        </el-table-column>\n                        <el-table-column label=\"表中的行数\" align=\"center\">\n                            <template slot-scope=\"{row}\">\n                                <span>{{ row.Rows }}</span>\n                            </template>\n                        </el-table-column>\n                        <el-table-column label=\"整个表的数据量\" align=\"center\">\n                            <template slot-scope=\"{row}\">\n                                <span>{{ row.Data_length }}</span>\n                            </template>\n                        </el-table-column>\n                        <el-table-column label=\"下一个自增的值\" align=\"center\">\n                            <template slot-scope=\"{row}\">\n                                <span>{{ row.Auto_increment }}</span>\n                            </template>\n                        </el-table-column>\n                        <el-table-column show-overflow-tooltip label=\"注释\" align=\"center\">\n                            <template slot-scope=\"{row}\">\n                                <span>{{ row.Comment }}</span>\n                            </template>\n                        </el-table-column>\n                        <el-table-column label=\"字符集\" align=\"center\">\n                            <template slot-scope=\"{row}\">\n                                <span>{{ row.Collation }}</span>\n                            </template>\n                        </el-table-column>\n                        <el-table-column show-overflow-tooltip label=\"创建时间\" align=\"center\" sortable=\"custom\" prop=\"Create_time\" :class-name=\"getSortClass('Create_time')\">\n                            <template slot-scope=\"{row}\">\n                                <span>{{ row.Create_time }}</span>\n                            </template>\n                        </el-table-column>\n                        <el-table-column show-overflow-tooltip label=\"修改时间\" align=\"center\" sortable=\"custom\" prop=\"Update_time\" :class-name=\"getSortClass('Update_time')\">\n                            <template slot-scope=\"{row}\">\n                                <span>{{ row.Update_time }}</span>\n                            </template>\n                        </el-table-column>\n                        <!--  字段结束   -->\n                        <!--  操作开始   -->\n                        <el-table-column label=\"操作\" align=\"center\" width=\"150px\" class-name=\"small-padding fixed-width\">\n                            <template slot-scope=\"{row,$index}\">\n                                <el-button round type=\"primary\" size=\"mini\" @click=\"handleOptimize(row)\">\n                                    优化\n                                </el-button>\n                                <el-button round size=\"mini\" type=\"danger\" @click=\"handleRepair(row,$index)\">\n                                    修复\n                                </el-button>\n                            </template>\n                        </el-table-column>\n                        <!--  操作结束   -->\n                    </el-table>\n                    <!--  表格结束  -->\n\n                    <!--  分页开始  -->\n                    <pagination v-show=\"total>0\" :total=\"total\" :page.sync=\"listQuery.page\"\n                                :limit.sync=\"listQuery.limit\" @pagination=\"getList\"\n                    />\n                    <!--  分页结束  -->\n                </el-card>\n            </el-col>\n        </el-row>\n    </div>\n</template>\n\n<script>\nimport { fetchList,optimizeTable,repairTable } from '@/api/table'\nimport waves from '@/directive/waves' // waves directive\nimport Pagination from '@/components/Pagination'\nimport { deleteAdmin } from '@/api/admin' // secondary package based on el-pagination\n\nexport default {\n    name: 'Table',\n    components: { Pagination },\n    directives: { waves },\n    data() {\n        return {\n            total: 0,\n            // 查询\n            listQuery: {\n                page: 1,\n                limit: 10,\n                sort: '-Create_time'\n            },\n            // 分页数据\n            list: null,\n            // 分页数据加载状态\n            listLoading: true\n        }\n    },\n    watch: {},\n    created() {\n        this.getList()\n    },\n    methods: {\n        getList() {\n            // 权限列表\n            this.listLoading = true\n            fetchList(this.listQuery).then(response => {\n                this.list = response.data.items\n                this.total = response.data.total\n                this.listLoading = false\n            },error => {\n                this.listLoading = false\n            })\n        },\n        resetFilter() {\n            // 重置查询\n            this.listQuery = {\n                page: 1,\n                limit: 10,\n                sort: '-Create_time'\n            }\n            this.getList()\n        },\n        handleFilter() {\n            // 点击查询\n            this.listQuery.page = 1\n            this.getList()\n        },\n        sortChange(data) {\n            // 设置排序\n            const { prop, order } = data\n            this.sortByColumn(order, prop)\n        },\n        sortByColumn(order, prop) {\n            if (order === 'ascending') {\n                this.listQuery.sort = '+' + prop\n            } else {\n                this.listQuery.sort = '-' + prop\n            }\n            this.handleFilter()\n        },\n        getSortClass: function(key) {\n            // 排序\n            const sort = this.listQuery.sort\n            return sort === `+${key}` ? 'ascending' : 'descending'\n        },\n        handleOptimize (row) {\n            // 优化\n            this.$confirm('此操作将优化'+row.Name+'表, 是否继续?', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            }).then(() => {\n                optimizeTable({ name:row.Name }).then((res) => {\n                    this.$notify({\n                        title: 'Success',\n                        message: 'Delete Successfully',\n                        type: 'success',\n                        duration: 2000\n                    })\n                    this.getList()\n                },error => {\n                    console.log('优化失败')\n                })\n            })\n        },\n        handleRepair (row) {\n            // 修复\n            this.$confirm('此操作将修复'+row.Name+'表, 是否继续?', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            }).then(() => {\n                repairTable({ name:row.Name }).then((res) => {\n                    this.$notify({\n                        title: 'Success',\n                        message: 'Delete Successfully',\n                        type: 'success',\n                        duration: 2000\n                    })\n                    this.getList()\n                },error => {\n                    console.log('修复失败')\n                })\n            })\n        },\n    }\n}\n</script>\n"]}]}