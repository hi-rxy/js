{"remainingRequest":"D:\\wwwroot\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\wwwroot\\vue-admin-template\\src\\views\\system\\configs.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\wwwroot\\vue-admin-template\\src\\views\\system\\configs.vue","mtime":1646404883932},{"path":"D:\\wwwroot\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645316876002},{"path":"D:\\wwwroot\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js","mtime":1645316878558},{"path":"D:\\wwwroot\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645316876002},{"path":"D:\\wwwroot\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js","mtime":1645316879025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB3YXZlcyBmcm9tICdAL2RpcmVjdGl2ZS93YXZlcycgLy8gd2F2ZXMgZGlyZWN0aXZlCmltcG9ydCBQYWdpbmF0aW9uIGZyb20gJ0AvY29tcG9uZW50cy9QYWdpbmF0aW9uJy8vIHNlY29uZGFyeSBwYWNrYWdlIGJhc2VkIG9uIGVsLXBhZ2luYXRpb24KaW1wb3J0IHsKICAgIGZldGNoQ29uZmlnR3JvdXBMaXN0LAogICAgZmV0Y2hDb25maWdMaXN0LAogICAgY3JlYXRlQ29uZmlnLAogICAgdXBkYXRlQ29uZmlnLAogICAgZGVsZXRlQ29uZmlnLAogICAgZmV0Y2hDb25maWdHcm91cEZpZWxkcywKICAgIGZldGNoQ29uZmlnR3JvdXBPbmUKfSBmcm9tICdAL2FwaS9jb25maWcnCgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAnQ29uZmlncycsCiAgICBjb21wb25lbnRzOiB7IFBhZ2luYXRpb24gfSwKICAgIGRpcmVjdGl2ZXM6IHsgd2F2ZXMgfSwKICAgIGZpbHRlcnM6IHsKICAgICAgICBzdGF0dXNGaWx0ZXIoc3RhdHVzKSB7CiAgICAgICAgICAgIGNvbnN0IHN0YXR1c01hcCA9IHsKICAgICAgICAgICAgICAgIGVuYWJsZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgZGlzYWJsZTogJ2RhbmdlcicKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gc3RhdHVzTWFwW3N0YXR1c10KICAgICAgICB9CiAgICB9LAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICAvLyDphY3nva7nu4Tpm4blkIgKICAgICAgICAgICAgY29uZmlnR3JvdXBMaXN0OiBudWxsLAogICAgICAgICAgICAvLyDlvZPliY3pgInkuK3nmoTphY3nva7nu4QKICAgICAgICAgICAgY29uZmlnR3JvdXBEYXRhOiBudWxsLAogICAgICAgICAgICAvLyDlvZPliY3pgInkuK3nmoTphY3nva7nu4TlrZfmrrXpm4blkIjmlbDmja4KICAgICAgICAgICAgY29uZmlnR3JvdXBGaWVsZHM6IG51bGwsCiAgICAgICAgICAgIC8vIOW9k+WJjemAieS4reeahOmFjee9rue7hOihqOWNleWtl+autQogICAgICAgICAgICBmb3JtOiBudWxsLAogICAgICAgICAgICAvLyDlvZPliY3mtLvliqjnmoTmoIfnrb7pobUKICAgICAgICAgICAgYWN0aXZlTmFtZTogJycsCiAgICAgICAgICAgIC8vIOihqOWNleaTjeS9nOexu+WeiwogICAgICAgICAgICBkaWFsb2dTdGF0dXM6ICcnLAogICAgICAgICAgICAvLyDliIbpobXmlbDmja7liqDovb3nirbmgIEKICAgICAgICAgICAgbGlzdExvYWRpbmc6IHRydWUsCiAgICAgICAgICAgIC8vIOm7mOiupOihqOWNleW8ueeqly3pmpDol48KICAgICAgICAgICAgZGlhbG9nRm9ybVZpc2libGU6IGZhbHNlLAogICAgICAgICAgICAvLyDooajljZXmj5DkuqTmjInpkq7nirbmgIEKICAgICAgICAgICAgYnV0dG9uU3RhdHVzOiBmYWxzZSwKICAgICAgICAgICAgLy8g54q25oCB5YC8CiAgICAgICAgICAgIHN0YXR1c09wdGlvbnM6IFsnZW5hYmxlJywgJ2Rpc2FibGUnXSwKICAgICAgICAgICAgLy8g6KGo5Y2V6aqM6K+B6KeE5YiZCiAgICAgICAgICAgIHJ1bGVzOiB7CiAgICAgICAgICAgICAgICBuYW1lOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+WQjeensCjoi7HmlocpIGlzIHJlcXVpcmVkJywgdHJpZ2dlcjogJ2JsdXInIH1dLAogICAgICAgICAgICAgICAgdGl0bGU6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn5ZCN56ewKOS4reaWhykgaXMgcmVxdWlyZWQnLCB0cmlnZ2VyOiAnYmx1cicgfV0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCiAgICB3YXRjaDoge30sCiAgICBjcmVhdGVkKCkgewogICAgICAgIHRoaXMuZ2V0TGlzdCgpCiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGdldExpc3QoKSB7CiAgICAgICAgICAgIC8vIOmFjee9rue7hOWIl+ihqAogICAgICAgICAgICBmZXRjaENvbmZpZ0dyb3VwTGlzdCh0aGlzLmxpc3RRdWVyeSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZ0dyb3VwTGlzdCA9IHJlc3BvbnNlLmRhdGEuaXRlbXMKICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnR3JvdXBEYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5jb25maWdHcm91cExpc3RbMF0pCiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZU5hbWUgPSB0aGlzLmNvbmZpZ0dyb3VwRGF0YS5uYW1lCiAgICAgICAgICAgICAgICB0aGlzLmdldENvbmZpZ0dyb3VwRGF0YSgpCiAgICAgICAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgfSwgZXJyb3IgPT4gewogICAgICAgICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5p+l6K+i5aSx6LSlJykKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGdldENvbmZpZ0dyb3VwT25lKG5hbWUpIHsKICAgICAgICAgICAgbGV0IGxvYWRpbmdJbnN0YW5jZSA9IHRoaXMuJGxvYWRpbmcoewogICAgICAgICAgICAgICAgJ3RleHQnOiAn5Yqg6L295LitJywKICAgICAgICAgICAgICAgICd0YXJnZXQnOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29uZmlnLWdyb3VwJyksCiAgICAgICAgICAgICAgICAnZnVsbHNjcmVlbic6IGZhbHNlLAogICAgICAgICAgICAgICAgJ3NwaW5uZXInOiAnZWwtaWNvbi1sb2FkaW5nJywKICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kJzogJ3JnYmEoMjQ1LCAyNDcsIDI1MCwgMSknCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC8vIOmFjee9rue7hOivpuaDhQogICAgICAgICAgICBmZXRjaENvbmZpZ0dyb3VwT25lKHsgbmFtZTogbmFtZSB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnR3JvdXBEYXRhID0gT2JqZWN0LmFzc2lnbih7fSxyZXNwb25zZS5kYXRhKQogICAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4geyAvLyDku6XmnI3liqHnmoTmlrnlvI/osIPnlKjnmoQgTG9hZGluZyDpnIDopoHlvILmraXlhbPpl60KICAgICAgICAgICAgICAgICAgICBsb2FkaW5nSW5zdGFuY2UuY2xvc2UoKQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSwgZXJyb3IgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4geyAvLyDku6XmnI3liqHnmoTmlrnlvI/osIPnlKjnmoQgTG9hZGluZyDpnIDopoHlvILmraXlhbPpl60KICAgICAgICAgICAgICAgICAgICBsb2FkaW5nSW5zdGFuY2UuY2xvc2UoKQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfmn6Xor6LlpLHotKUnKQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgZ2V0Q29uZmlnR3JvdXBEYXRhKCkgewogICAgICAgICAgICAvLyDphY3nva7nu4TlrZfmrrXliJfooagKICAgICAgICAgICAgZmV0Y2hDb25maWdHcm91cEZpZWxkcyh7IG5hbWU6IHRoaXMuYWN0aXZlTmFtZSB9KS50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuZm9ybSA9IHJlcy5kYXRhLmZvcm0KICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnR3JvdXBGaWVsZHMgPSByZXMuZGF0YS5maWVsZHMKICAgICAgICAgICAgfSwgZXJyb3IgPT4gewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+afpeivoumFjee9rue7hOWtl+auteWksei0pScpCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBoYW5kbGVQYW5lVGFiQ2xpY2sob2JqLCBhY3Rpb24pIHsKICAgICAgICAgICAgLy8g5qCH562+6aG154K55Ye75LqL5Lu2CiAgICAgICAgICAgIHRoaXMuYWN0aXZlTmFtZSA9IG9iai5uYW1lCiAgICAgICAgICAgIHRoaXMuZ2V0Q29uZmlnR3JvdXBPbmUob2JqLm5hbWUpCiAgICAgICAgICAgIHRoaXMuZ2V0Q29uZmlnR3JvdXBEYXRhKCkKICAgICAgICB9LAogICAgICAgIHJlc2V0VGVtcCgpIHsKICAgICAgICAgICAgLy8g6YeN572u5bem5L6n6KGo5Y2VCiAgICAgICAgICAgIHRoaXMuZm9ybSA9IHt9CiAgICAgICAgfSwKICAgICAgICB1cGRhdGVDb25maWdEYXRhKCkgewogICAgICAgICAgICAvLyDkv67mlLnphY3nva7nu4QKICAgICAgICAgICAgdGhpcy4kcmVmc1snZGF0YUZvcm0nXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICAgICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuYnV0dG9uU3RhdHVzID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgIHVwZGF0ZUNvbmZpZyhPYmplY3QuYXNzaWduKHt9LCB0aGlzLmZvcm0pKS50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ1N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0NyZWF0ZWQgU3VjY2Vzc2Z1bGx5JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAwCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q29uZmlnR3JvdXBEYXRhKCkKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5idXR0b25TdGF0dXMgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgIH0sIGVycm9yID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnV0dG9uU3RhdHVzID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["configs.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"configs.vue","sourceRoot":"src/views/system","sourcesContent":["<template>\n    <div class=\"app-container\">\n        <el-row :gutter=\"20\">\n            <el-col :span=\"24\">\n                <el-card class=\"box-card\">\n                    <template>\n                        <el-tabs class=\"config-group\" v-model=\"activeName\" @tab-click=\"handlePaneTabClick\">\n                            <el-tab-pane v-for=\"item in configGroupList\" :key=\"item.id\" :label=\"item.title\"\n                                         :name=\"item.name\"\n                            >\n                                <el-col :span=\"24\">\n                                    <el-card class=\"box-card\">\n                                        <el-form v-loading=\"listLoading\" ref=\"dataForm\" :rules=\"rules\" :model=\"form\"\n                                                 label-position=\"right\" label-width=\"220px\"\n                                                 style=\"width: 600px; \"\n                                        >\n                                            <el-form-item v-for=\"(item,index) in configGroupFields\"\n                                                          :label=\"item.title\" :prop=\"item.name\"\n                                            >\n                                                <el-input v-model=\"item.value\"/>\n                                            </el-form-item>\n                                        </el-form>\n                                    </el-card>\n                                </el-col>\n                            </el-tab-pane>\n                        </el-tabs>\n                    </template>\n                </el-card>\n            </el-col>\n        </el-row>\n    </div>\n</template>\n<script>\nimport waves from '@/directive/waves' // waves directive\nimport Pagination from '@/components/Pagination'// secondary package based on el-pagination\nimport {\n    fetchConfigGroupList,\n    fetchConfigList,\n    createConfig,\n    updateConfig,\n    deleteConfig,\n    fetchConfigGroupFields,\n    fetchConfigGroupOne\n} from '@/api/config'\n\nexport default {\n    name: 'Configs',\n    components: { Pagination },\n    directives: { waves },\n    filters: {\n        statusFilter(status) {\n            const statusMap = {\n                enable: 'success',\n                disable: 'danger'\n            }\n            return statusMap[status]\n        }\n    },\n    data() {\n        return {\n            // 配置组集合\n            configGroupList: null,\n            // 当前选中的配置组\n            configGroupData: null,\n            // 当前选中的配置组字段集合数据\n            configGroupFields: null,\n            // 当前选中的配置组表单字段\n            form: null,\n            // 当前活动的标签页\n            activeName: '',\n            // 表单操作类型\n            dialogStatus: '',\n            // 分页数据加载状态\n            listLoading: true,\n            // 默认表单弹窗-隐藏\n            dialogFormVisible: false,\n            // 表单提交按钮状态\n            buttonStatus: false,\n            // 状态值\n            statusOptions: ['enable', 'disable'],\n            // 表单验证规则\n            rules: {\n                name: [{ required: true, message: '名称(英文) is required', trigger: 'blur' }],\n                title: [{ required: true, message: '名称(中文) is required', trigger: 'blur' }]\n            }\n        }\n    },\n    watch: {},\n    created() {\n        this.getList()\n    },\n    methods: {\n        getList() {\n            // 配置组列表\n            fetchConfigGroupList(this.listQuery).then(response => {\n                this.configGroupList = response.data.items\n                this.configGroupData = Object.assign({}, this.configGroupList[0])\n                this.activeName = this.configGroupData.name\n                this.getConfigGroupData()\n                this.listLoading = false\n            }, error => {\n                this.listLoading = false\n                console.log('查询失败')\n            })\n        },\n        getConfigGroupOne(name) {\n            let loadingInstance = this.$loading({\n                'text': '加载中',\n                'target': document.querySelector('.config-group'),\n                'fullscreen': false,\n                'spinner': 'el-icon-loading',\n                'background': 'rgba(245, 247, 250, 1)'\n            })\n            // 配置组详情\n            fetchConfigGroupOne({ name: name }).then(response => {\n                this.configGroupData = Object.assign({},response.data)\n                this.$nextTick(() => { // 以服务的方式调用的 Loading 需要异步关闭\n                    loadingInstance.close()\n                })\n            }, error => {\n                this.$nextTick(() => { // 以服务的方式调用的 Loading 需要异步关闭\n                    loadingInstance.close()\n                })\n                console.log('查询失败')\n            })\n        },\n        getConfigGroupData() {\n            // 配置组字段列表\n            fetchConfigGroupFields({ name: this.activeName }).then((res) => {\n                this.form = res.data.form\n                this.configGroupFields = res.data.fields\n            }, error => {\n                console.log('查询配置组字段失败')\n            })\n        },\n        handlePaneTabClick(obj, action) {\n            // 标签页点击事件\n            this.activeName = obj.name\n            this.getConfigGroupOne(obj.name)\n            this.getConfigGroupData()\n        },\n        resetTemp() {\n            // 重置左侧表单\n            this.form = {}\n        },\n        updateConfigData() {\n            // 修改配置组\n            this.$refs['dataForm'].validate((valid) => {\n                if (valid) {\n                    this.buttonStatus = true\n                    updateConfig(Object.assign({}, this.form)).then((res) => {\n                        this.dialogFormVisible = false\n                        this.$notify({\n                            title: 'Success',\n                            message: 'Created Successfully',\n                            type: 'success',\n                            duration: 2000\n                        })\n                        this.getConfigGroupData()\n                        this.buttonStatus = false\n                    }, error => {\n                        this.dialogFormVisible = false\n                        this.buttonStatus = true\n                    })\n                }\n            })\n        }\n    }\n}\n</script>\n"]}]}