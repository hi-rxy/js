{"remainingRequest":"D:\\wwwroot\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\wwwroot\\vue-admin-template\\src\\views\\system\\configs.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"D:\\wwwroot\\vue-admin-template\\src\\views\\system\\configs.vue","mtime":1646495094749},{"path":"D:\\wwwroot\\vue-admin-template\\node_modules\\css-loader\\dist\\cjs.js","mtime":1645316877405},{"path":"D:\\wwwroot\\vue-admin-template\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1645316879909},{"path":"D:\\wwwroot\\vue-admin-template\\node_modules\\postcss-loader\\src\\index.js","mtime":1645316878550},{"path":"D:\\wwwroot\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645316876002},{"path":"D:\\wwwroot\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js","mtime":1645316879025}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5jb25maWctZ3JvdXAtZmllbGRzIC5lbC1pbnB1dC0tbWVkaXVtIHsKICAgIHdpZHRoOjM1MHB4ICFpbXBvcnRhbnQ7Cn0KLmNvbmZpZy1ncm91cC1maWVsZHMgLmVsLWlucHV0IHsKICAgIHdpZHRoOjM1MHB4ICFpbXBvcnRhbnQ7Cn0K"},{"version":3,"sources":["configs.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA;AACA;AACA;AACA;AACA;AACA","file":"configs.vue","sourceRoot":"src/views/system","sourcesContent":["<template>\n    <div class=\"app-container\">\n        <el-row :gutter=\"20\">\n            <el-col :span=\"24\">\n                <el-card class=\"box-card\">\n                    <template>\n                        <el-tabs class=\"config-group-fields\" v-model=\"activeName\" @tab-click=\"handlePaneTabClick\">\n                            <el-tab-pane v-for=\"item in configGroupList\" :key=\"item.id\" :label=\"item.title\"\n                                         :name=\"item.name\"\n                            >\n                                <el-col :span=\"24\">\n                                    <el-card class=\"box-card\">\n                                        <el-form ref=\"dataForm\" :model=\"form\"\n                                                 label-position=\"right\" label-width=\"220px\"\n                                                 style=\"width: 1000px; \"\n                                        >\n                                            <el-form-item v-for=\"(item,index) in configGroupFields\"\n                                                          :label=\"item.name\" :prop=\"item.name\" :key=\"item.id\"\n                                                          style=\"margin-bottom:10px;\"\n                                            >\n                                                <el-input\n                                                    v-if=\"item.type === 'textarea'\"\n                                                    type=\"textarea\"\n                                                    :rows=\"2\"\n                                                    placeholder=\"请输入内容\"\n                                                    v-model=\"item.value\">\n                                                </el-input>\n\n                                                <el-switch\n                                                    v-model=\"item.value\"\n                                                    v-else-if=\"item.type === 'radio'\"\n                                                    active-color=\"#13ce66\"\n                                                    inactive-color=\"#ff4949\">\n                                                </el-switch>\n\n                                                <el-input v-else v-model=\"item.value\"/>\n                                                <span style=\"font-size: 8px;color: #97a8be;margin-left:15px;\" v-if=\"item.message !== ''\">{{item.message}}</span>\n                                            </el-form-item>\n                                            <el-form-item>\n                                                <el-button type=\"primary\" :disabled=\"buttonStatus\" @click=\"updateConfigData(item.id)\">\n                                                    保存\n                                                </el-button>\n                                            </el-form-item>\n                                        </el-form>\n                                    </el-card>\n                                </el-col>\n                            </el-tab-pane>\n                        </el-tabs>\n                    </template>\n                </el-card>\n            </el-col>\n        </el-row>\n    </div>\n</template>\n<style>\n.config-group-fields .el-input--medium {\n    width:350px !important;\n}\n.config-group-fields .el-input {\n    width:350px !important;\n}\n</style>\n<script>\nimport waves from '@/directive/waves' // waves directive\nimport Pagination from '@/components/Pagination'// secondary package based on el-pagination\nimport {\n    fetchConfigGroupList,\n    fetchConfigGroupFields,\n    updateConfigFields\n} from '@/api/config'\n\nexport default {\n    name: 'Configs',\n    components: { Pagination },\n    directives: { waves },\n    filters: {\n        statusFilter(status) {\n            const statusMap = {\n                enable: 'success',\n                disable: 'danger'\n            }\n            return statusMap[status]\n        }\n    },\n    data() {\n        return {\n            // 配置组集合\n            configGroupList: null,\n            // 当前选中的配置组字段集合数据\n            configGroupFields: null,\n            // 当前选中的配置组表单字段\n            form: null,\n            // 当前活动的标签页\n            activeName: '',\n            // 表单操作类型\n            dialogStatus: '',\n            // 默认表单弹窗-隐藏\n            dialogFormVisible: false,\n            // 表单提交按钮状态\n            buttonStatus: false,\n            // 状态值\n            statusOptions: ['enable', 'disable'],\n        }\n    },\n    watch: {},\n    created() {\n        this.getList()\n    },\n    methods: {\n        getList() {\n            // 配置组列表\n            fetchConfigGroupList(this.listQuery).then(response => {\n                this.configGroupList = response.data.items\n                let configGroupData = Object.assign({}, this.configGroupList[0])\n                this.activeName = configGroupData.name\n                this.getConfigGroupData()\n            }, error => {\n                console.log('查询失败')\n            })\n        },\n        getConfigGroupData() {\n            // 配置组字段列表\n            let loadingInstance = this.$loading({\n                'text': '加载中',\n                'target': document.querySelector('.config-group-fields'),\n                'fullscreen': false,\n                'spinner': 'el-icon-loading',\n                'background': 'rgba(245, 247, 250, 1)'\n            })\n            fetchConfigGroupFields({ name: this.activeName }).then((res) => {\n                this.form = res.data.form\n                this.configGroupFields = res.data.fields\n                this.$nextTick(() => { // 以服务的方式调用的 Loading 需要异步关闭\n                    loadingInstance.close()\n                })\n            }, error => {\n                this.$nextTick(() => { // 以服务的方式调用的 Loading 需要异步关闭\n                    loadingInstance.close()\n                })\n                console.log('查询配置组字段失败')\n            })\n        },\n        handlePaneTabClick(obj, action) {\n            // 标签页点击事件\n            this.activeName = obj.name\n            this.getConfigGroupData()\n        },\n        resetTemp() {\n            // 重置左侧表单\n            this.form = {}\n        },\n        updateConfigData(id) {\n            // 修改配置组\n            this.buttonStatus = true\n            updateConfigFields(Object.assign({}, this.configGroupFields)).then((res) => {\n                this.$notify({\n                    title: 'Success',\n                    message: 'Created Successfully',\n                    type: 'success',\n                    duration: 2000\n                })\n                this.getConfigGroupData()\n                this.buttonStatus = false\n            }, error => {\n                this.buttonStatus = false\n            })\n        }\n    }\n}\n</script>\n"]}]}